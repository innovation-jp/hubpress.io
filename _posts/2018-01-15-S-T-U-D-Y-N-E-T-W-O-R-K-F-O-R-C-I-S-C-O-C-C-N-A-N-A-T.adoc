# macのGNS3でNETWORK(CISCO CCNA)のお勉強？(NAT)
:published_at: 2018-01-15
:hp-alt-title: STUDY NETWORK FOR CISCO CCNA(NAT)
:hp-tags: Network, GNS3, CISCO, CCNA, KTN, NAT, CentOS

KTNです +
前回の続きで今度はNATの勉強をしていきたいと思います +
早速始めましょう！ +

## NATしてみます
今回は本社のPCから仮想インターネットに公開されているWebサイトを見れるよう +
環境構築していきたいと思います +

おおまかな手順は以下になります +
１．GNS3の標準VPCSからCentOSに切り替える +
２．Webサイトを用意する +
３．本社ルータにNAT設定をする +
４．本社のPCを増やしてもWebを見れることを確認する +

## １．GNS3の標準VPCSからCentOSに切り替える
標準のVPCSだとcurlコマンドも無いし、 +
Webサーバを立てる方法もわからなかったので、CentOSにしたいと思いやってみました +
VirtualBoxで仮想マシンを作成してから、GNS3の登録して使えるようにしていきます +

以下画像の通り仮想マシンを作成してCentOSをインストールしていきます

image::/images/kotani/20180115/1/1.png[]
image::/images/kotani/20180115/1/2.png[]
image::/images/kotani/20180115/1/3.png[]
image::/images/kotani/20180115/1/4.png[]
image::/images/kotani/20180115/1/5.png[]
image::/images/kotani/20180115/1/6.png[]
image::/images/kotani/20180115/1/7.png[]
image::/images/kotani/20180115/1/8.png[]

これで仮想マシンの作成が出来ました + 
起動時にCentOSのインストールディスクを使いたいので設定します

image::/images/kotani/20180115/1/9.png[]
image::/images/kotani/20180115/1/10.png[]
image::/images/kotani/20180115/1/11.png[]
image::/images/kotani/20180115/1/12.png[]

これで起動時にISOイメージを読み込むように設定できました +
仮想マシンを起動します

image::/images/kotani/20180115/1/13.png[]
image::/images/kotani/20180115/1/14.png[]

Install CentOS 7 を選択します

image::/images/kotani/20180115/1/16.png[]
image::/images/kotani/20180115/1/17.png[]

「インストール先」で設定が必要となっているのでクリックして設定します

image::/images/kotani/20180115/1/18.png[]

デフォルトの設定で問題ないので、「完了」をクリック

image::/images/kotani/20180115/1/19.png[]
image::/images/kotani/20180115/1/20.png[]

「ROOT パスワード」を設定しないと終れないようなので、クリックして設定します

image::/images/kotani/20180115/1/21.png[]
image::/images/kotani/20180115/1/22.png[]

「設定完了」をクリックしたらインストール終了です

image::/images/kotani/20180115/1/23.png[]

インターネットに接続できるよう、ネットワークの設定をしてから起動します +
仮想マシンを停止してから設定していきます +
※今回はブリッジにして接続するようにしました +

image::/images/kotani/20180115/1/31.png[]
image::/images/kotani/20180115/1/32.png[]

上記ネットワークの設定後起動します +
Webサーバで使うので、apacheをインストールしておきます +
----
yum install httpd
----

準備出来たので再度シャットダウンします +
仮想マシンは複数台欲しいので、クローンしておきます +
とりあえず3台作ってみました +

image::/images/kotani/20180115/1/41.png[]
image::/images/kotani/20180115/1/42.png[]
image::/images/kotani/20180115/1/43.png[]

その後、GNS3の設定画面のVirtualBox VMsに追加して、 +
以下のように配置しました

image::/images/kotani/20180115/1/61.png[]


GNS3から仮想マシンを起動すると「ネットワーク設定はしないでね」というエラーになるの	で、 +
Virtual Boxの設定画面で各仮想マシンのネットワーク設定を削除します +

image::/images/kotani/20180115/1/51.png[]
image::/images/kotani/20180115/1/52.png[]
image::/images/kotani/20180115/1/53.png[]
image::/images/kotani/20180115/1/54.png[]
image::/images/kotani/20180115/1/55.png[]
image::/images/kotani/20180115/1/56.png[]

再度仮想マシンを起動します。 +
起動後以下のコマンドでIPアドレスを設定します +
設定後pingして疎通確認してみます +

image::/images/kotani/20180115/1/71.png[]

疎通できたのでOKです +


## ２．Webサイトを用意する

以下のように仮想インターネットにWebサイト用の仮想マシンを接続します +

image::/images/kotani/20180115/2/1.png[]

R1に接続しようとしたのですがインタフェース数が足りなかったので追加します +
NM-4Eインターフェースを追加して再起動します +

image::/images/kotani/20180115/2/2.png[]
image::/images/kotani/20180115/2/3.png[]

再起動後以下のコマンドでIPアドレスを設定します +
設定後apacheを起動し、CURLコマンドで確認します +

# ３．本社ルータにNAT設定をする

ddddd




