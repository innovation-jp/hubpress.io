# macのGNS3でNETWORK(CISCO CCNA)のお勉強？(NAT)
:published_at: 2018-01-15
:hp-alt-title: STUDY NETWORK FOR CISCO CCNA(NAT)
:hp-tags: Network, GNS3, CISCO, CCNA, KTN, NAT, CentOS

KTNです +
前回の続きで今度はNATの勉強をしていきたいと思います +
早速始めましょう！ +

## NATしてみます
今回は本社のPCから仮想インターネットに公開されているWebサイトを見れるよう +
環境構築していきたいと思います +

おおまかな手順は以下になります +
１．GNS3の標準VPCSからCentOSに切り替える +
２．Webサイトを構築する +
３．本社ルータにNAT設定をする +
４．本社のPCを増やしてもWebを見れることを確認する +

## １．GNS3の標準VPCSからCentOSに切り替える
標準のVPCSだとcurlコマンドも無いし、 +
Webサーバを立てる方法もわからなかったので、CentOSにしたいと思いやってみました +
VirtualBoxで仮想マシンを作成してから、GNS3の登録して使えるようにしていきます +

以下画像の通り仮想マシンを作成してCentOSをインストールしていきます

image::/images/kotani/20180115/1/1.png[]
image::/images/kotani/20180115/1/2.png[]
image::/images/kotani/20180115/1/3.png[]
image::/images/kotani/20180115/1/4.png[]
image::/images/kotani/20180115/1/5.png[]
image::/images/kotani/20180115/1/6.png[]
image::/images/kotani/20180115/1/7.png[]
image::/images/kotani/20180115/1/8.png[]
image::/images/kotani/20180115/1/9.png[]
image::/images/kotani/20180115/1/10.png[]
image::/images/kotani/20180115/1/11.png[]
image::/images/kotani/20180115/1/12.png[]
image::/images/kotani/20180115/1/13.png[]
image::/images/kotani/20180115/1/14.png[]
image::/images/kotani/20180115/1/15.png[]
image::/images/kotani/20180115/1/16.png[]
image::/images/kotani/20180115/1/17.png[]
image::/images/kotani/20180115/1/18.png[]
image::/images/kotani/20180115/1/19.png[]
image::/images/kotani/20180115/1/20.png[]
image::/images/kotani/20180115/1/21.png[]
image::/images/kotani/20180115/1/22.png[]
image::/images/kotani/20180115/1/23.png[]

インストールが終わったらインターネットに接続できるよう、 +
ネットワークの設定をしてから起動します +
※今回はブリッジにして接続するようにしました +

image::/images/kotani/20180115/1/31.png[]
image::/images/kotani/20180115/1/32.png[]

Webサーバで使うので、apacheをインストールしておきます +
----
yum install httpd
----

準備出来たのでシャットダウンします +
仮想マシンは複数台欲しいので、クローンしておきます +
とりあえず3台作ってみました +

image::/images/kotani/20180115/1/41.png[]
image::/images/kotani/20180115/1/42.png[]
image::/images/kotani/20180115/1/43.png[]

その後、GNS3の設定画面のVirtualBox VMsに追加して、 +
以下のように配置しました

image::/images/kotani/20180115/1/61.png[]


GNS3から仮想マシンを起動すると「ネットワーク設定はしないでね」というエラーになるの	で、 +
Virtual Boxの設定画面で各仮想マシンのネットワーク設定を削除します +

image::/images/kotani/20180115/1/51.png[]
image::/images/kotani/20180115/1/52.png[]
image::/images/kotani/20180115/1/53.png[]
image::/images/kotani/20180115/1/54.png[]
image::/images/kotani/20180115/1/55.png[]
image::/images/kotani/20180115/1/56.png[]

再度仮想マシンを起動します。 +
起動後以下のコマンドでIPアドレスを設定します +
設定後pingして疎通確認してみます +

image::/images/kotani/20180115/1/71.png[]

疎通できたのでOKです +


## ２．Webサイトを構築する

以下のように仮想インターネットに仮想マシンを接続します
R1に接続しようとしたのですがインタフェース数が足りなかったので追加します
NM-4Eインターフェースを追加して再起動します

再起動後以下のコマンドでIPアドレスを設定します
設定後apacheを起動し、CURLコマンドで確認します