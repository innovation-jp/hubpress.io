# 【Swift3】ランダムマッチチャットアプリを作ったお話。
:published_at: 2017-05-19
:hp-alt-title: swift chat
:hp-tags: kohe,swift3,chat,FIrebase

こんばんは、こへです。 +


そろそろ、Swift3とFIrebaseを使って、完全匿名ランダムマッチングチャットを作りたい時期が来ましたので作成。 +

# やりたいこと
 
 * 1対1のチャット
 * 匿名
 * ランダムにマッチング 

*以上！！*    

# 画面イメージ設計

image::kohe/randomChat.002.png[]

ロード中(マッチング相手を探し中)くるくる回すインテグレーションだけにはこだわりたい。

# DB設計
Firebase　を使うためこんな感じにカキカキ。

image::kohe/randomChat.001.png[]

枠から文字がはみ出ているのはご愛嬌。



# FIrebase

GoogleアカウントでFirebaseに登録。
※ココらへんの設定はググれば大量に出てくるため割愛。

書き込み読み込みのルールもパブリックにしてしまってはいかんので認証を必要にする。

```
{
  "rules": {
    ".read": "auth != null",
    ".write":"auth != null"
  }
}
```

そしてまずは、ルーム作成の際に与える数値を持つ keyとvalueを作成。

image::kohe/swiftchat1.png[]

初期値は適当。 +
今回はなんとなく「２０」を選択。

ランダムチャットがマッチングするたびに、この値をインクリメントし、その数値を名前としてroomを作っていくよーん。


# ライブラリ

* Firebase
* Firebase/Database
* Firebase/Core
* JSQMessagesViewController
* Firebase/Auth
* SVProgressHUD
* ChameleonFramework/Swift

上記のこやつらをpodの野郎で取り込んでいく。 +
ライブラリって素晴らしい… :0






