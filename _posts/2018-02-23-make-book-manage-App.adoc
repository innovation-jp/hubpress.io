# 本の管理アプリをVuejs,Laravel,Docker,GCP,GKE,gitlabを使って作った話。


:hp-alt-title: make book manage App
:hp-tags: kohe, Vuejs,Laravel,Docker,GCP,GKE,Kubernetes,gitlab


こへです。

そろそろ +
`Vuejs` `Laravel` `Docker`  `GKE` `gitlab` +  
を使って社内の本の管理アプリを作りたい時期が来ましたので作成することにしました。

_お金を1円もかけたくない_ + 
と言う裏目標も持ちます。

## 完成物 
image::/images/kohe/ginee1.0.gif[]

## Version管理
version管理に githubではなくgitlabを使います。

理由:

- private repository が無料
- Container Resistory が使える


## 構成


├── docker-compose.yml +
├── nginx +
│   ├── Dockerfile +
│   └── etc +
│       └── nginx +
├── phpfpm +
│   └── Dockerfile +
└── www +
   　　└── *[blue]#BookApp#* +


## 環境構築(Docker)
Dockerの構成や、中身などは
↓の記事にかかれてあります。

http://tech.innovation.co.jp/2018/01/05/carry-out-tutorial-on-Laravel-amp-Docker.html

上記の設定に加え、今回はメール認証＆Login機能をつけたいので
メール受信を開発用に `Mailhog` コンテナを使用する用に `docker-compose.yml` に追記、


```
  mailhog:
    image          : mailhog/mailhog:latest
    container_name : mailhog
    hostname       : mailhog
    ports:
      - "1025:1025"
      - "8025:8025"
```

そして `localhost:8025` にアクセスすると受信BOXが使えます。

## ログイン機能

本の貸し借りということで、必須機能の1つであるログイン機能を作ります。

_https://github.com/bestmomo/laravel-email-confirmation_

↑主にこちらの記事を参考に作らせていただきました。
メール送信にはAmazon SESを使おうと思いましたが、
認証に使うだけなので、本番ではお手軽にできるGmailを使って、メールを送ることにしました。

メール認証もする必要がなければ `php artisan make:auth` 実行するだけで、
できてしまうのは非常に便利ですね。 +
_参考：https://readouble.com/laravel/5.5/ja/authentication.html_

`localhost`にアクセスするとこんな感じ。
 
image::/images/kohe/ginee2.0.png?[]


そしてResisterで登録。


image::/images/kohe/ginee3.0.png?[]


## Vuejs

├── app.js +
├── app.vue +
├── bootstrap.js +
├── components +
│   ├── Books.vue +
│   ├── addBook.vue +
├── router.js +
└── services +
    └── http.js +

構成はこんな感じ。

